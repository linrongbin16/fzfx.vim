#!/bin/sh

set -x

branch=""
content=$1
content_len=${#content}
has_star=0
has_arrow=0
for (( i=0; i<content_len; i++))
do
    if [[ "${content:i:1}" = "*" ]]
    then
        has_star=1
        branch_len=$(( content_len-i-1 ))
        branch=${content:i+1:branch_len}
        break
    fi
    if (( i+1<content_len )) && [[ "${content:i:2}" = "->" ]]
    then
        has_arrow=1
        branch_len=$(( content_len-i-2 ))
        branch=${content:i+2:branch_len}
        break
    fi
done

if [[ $has_star -gt 0 ]] || [[ $has_arrow -gt 0 ]]; then
    echo "branch:$branch, content:$content"
    git log --graph --pretty=oneline --abbrev-commit --color $branch
else
    echo "branch:$branch, content:$content"
    git log --graph --pretty=oneline --abbrev-commit --color $content
fi
