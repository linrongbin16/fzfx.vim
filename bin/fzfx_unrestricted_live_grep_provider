#!/bin/sh

query=""
option=""
content=$1
content_len=${#content}
has_option=0
for (( i=0; i<content_len; i++))
do
    if (( i+1<content_len )) && [[ "${content:i:2}" = "--" ]]
    then
        has_option=1
        query=${content:0:i}
        option_len=$(( content_len-i-2 ))
        option=${content:i+2:option_len}
        break
    fi
done

if [ $has_option -gt 0 ]; then
    rg --column -n --no-heading --color=always -S -g -uu $option -- $query || true
else
    rg --column -n --no-heading --color=always -S -g -uu -- $content || true
fi
